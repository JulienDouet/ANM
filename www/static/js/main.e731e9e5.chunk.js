(this["webpackJsonpcom.anm.app"]=this["webpackJsonpcom.anm.app"]||[]).push([[0],{278:function(e,t,a){},279:function(e,t,a){},284:function(e,t,a){},286:function(e,t,a){},305:function(e,t){},307:function(e,t){},318:function(e,t){},320:function(e,t){},345:function(e,t){},347:function(e,t){},348:function(e,t){},353:function(e,t){},355:function(e,t){},361:function(e,t){},363:function(e,t){},382:function(e,t){},394:function(e,t){},397:function(e,t){},403:function(e,t){},405:function(e,t){},428:function(e,t){},525:function(e,t,a){var n={"./cat":250,"./cat.js":250,"./cd":151,"./cd.js":151,"./chmod":251,"./chmod.js":251,"./common":13,"./common.js":13,"./cp":152,"./cp.js":152,"./dirs":252,"./dirs.js":252,"./echo":253,"./echo.js":253,"./error":153,"./error.js":153,"./exec":254,"./exec-child":255,"./exec-child.js":255,"./exec.js":254,"./find":256,"./find.js":256,"./grep":257,"./grep.js":257,"./head":258,"./head.js":258,"./ln":259,"./ln.js":259,"./ls":156,"./ls.js":156,"./mkdir":260,"./mkdir.js":260,"./mv":261,"./mv.js":261,"./popd":262,"./popd.js":262,"./pushd":263,"./pushd.js":263,"./pwd":155,"./pwd.js":155,"./rm":157,"./rm.js":157,"./sed":264,"./sed.js":264,"./set":265,"./set.js":265,"./sort":266,"./sort.js":266,"./tail":267,"./tail.js":267,"./tempdir":154,"./tempdir.js":154,"./test":268,"./test.js":268,"./to":269,"./to.js":269,"./toEnd":270,"./toEnd.js":270,"./touch":271,"./touch.js":271,"./uniq":272,"./uniq.js":272,"./which":273,"./which.js":273};function c(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}c.keys=function(){return Object.keys(n)},c.resolve=s,e.exports=c,c.id=525},526:function(e,t,a){},528:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(29),s=a.n(c),r=(a(278),a(8)),l=a(54),o=(a(279),a(535)),i=a(536),u=a(538),j=a.p+"static/media/regle-cras.38c0b4c7.png",d=function(e,t,a){return e>=t&&e<=a},b=a(1),m=function(e){var t=e.mapArray,a=e.amer,c=Object(n.useState)(!1),s=Object(r.a)(c,2),d=s[0],m=s[1],p=function(){return m(!1)},h=Object(n.useState)("0"),O=Object(r.a)(h,2),g=O[0],f=O[1],x=Object(n.useState)("200"),v=Object(r.a)(x,2),N=v[0],S=v[1],y=Object(n.useState)("0"),M=Object(r.a)(y,2),w=M[0],D=M[1],C=Object(n.useState)("0"),F=Object(r.a)(C,2),k=F[0],I=F[1],L=Object(n.useState)({x1:0,y1:0,r:0,angle:-90}),E=Object(r.a)(L,2),A=E[0],P=E[1],T=Object(n.useRef)(null);Object(n.useEffect)((function(){if(t.length){var e=T.current;e.height=256*t.length,e.width=256*t[0].length}}),[t]);var z=function(){var e=new Image;e.src=j,e.alt="alt text";var t=T.current.getContext("2d");e.onload=function(){t.save(),t.translate(A.x1,A.y1),t.rotate((g-90)*(Math.PI/180)),t.drawImage(e,-e.width/2,0),t.restore()}};Object(n.useEffect)((function(){P(Object(l.a)(Object(l.a)({},A),{},{angle:parseInt(g,10)+parseInt(w,10)+parseInt(k,10)-90}))}),[g]),Object(n.useEffect)((function(){P(Object(l.a)(Object(l.a)({},A),{},{r:N}))}),[N]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("canvas",{id:"canvas",ref:T,className:"canvas-style mt-5",onClick:function(e){return!!a&&function(e){m(!0);var t=T.current.getBoundingClientRect();P(Object(l.a)(Object(l.a)({},A),{},{x1:e.clientX-t.left,y1:e.clientY-t.top,r:N}))}(e)}}),Object(b.jsxs)(o.a,{show:d,onHide:p,size:"sm",centered:!0,children:[Object(b.jsx)(o.a.Header,{children:Object(b.jsx)(o.a.Title,{children:"Relever l'amer"})}),Object(b.jsxs)(o.a.Body,{children:[Object(b.jsx)(i.a.Label,{htmlFor:"angle",children:"Angle"}),Object(b.jsx)(i.a.Control,{className:"mb-2 mr-sm-2",id:"angle",value:g,onChange:function(e){return f(e.target.value)},type:"number",placeholder:"Angle"}),Object(b.jsx)(i.a.Label,{htmlFor:"longueur",children:"Longueur"}),Object(b.jsx)(i.a.Control,{className:"mb-2 mr-sm-2",id:"longueur",value:N,onChange:function(e){return S(e.target.value)},type:"number",placeholder:"Longueur"}),Object(b.jsx)(i.a.Label,{htmlFor:"declinaison",children:"D\xe9clinaison (D)"}),Object(b.jsx)(i.a.Control,{className:"mb-2 mr-sm-2",id:"declinaison",value:k,onChange:function(e){return I(e.target.value)},type:"number",placeholder:"D\xe9clinaison"}),Object(b.jsx)(i.a.Label,{htmlFor:"deviation",children:"D\xe9viation (d)"}),Object(b.jsx)(i.a.Control,{className:"mb-2 mr-sm-2",id:"deviation",value:w,onChange:function(e){return D(e.target.value)},type:"number",placeholder:"D\xe9viation"})]}),Object(b.jsxs)(o.a.Footer,{children:[Object(b.jsx)(u.a,{variant:"secondary",onClick:p,children:"Annuler"}),Object(b.jsx)(u.a,{variant:"primary",onClick:function(e){!function(){var e=T.current.getContext("2d");e.moveTo(A.x1,A.y1),e.lineTo(A.x1+A.r*Math.cos(Math.PI*A.angle/180),A.y1+A.r*Math.sin(Math.PI*A.angle/180)),e.stroke()}(),z(),p()},children:"Valider le marquage"})]})]})]})},p=(a(284),a(106)),h=function(e,t,a,n,c){return[parseInt((1-Math.asinh(Math.tan(t*(Math.PI/180)))/Math.PI)/2*Math.pow(2,e)),parseInt((a+180)/360*Math.pow(2,e)),parseInt((1-Math.asinh(Math.tan(n*(Math.PI/180)))/Math.PI)/2*Math.pow(2,e)),parseInt((c+180)/360*Math.pow(2,e))]},O=function(e,t,a,n,c){var s=t-n,r=a-c,l=t+n,o=a+c;return[parseInt((1-Math.asinh(Math.tan(s*(Math.PI/180)))/Math.PI)/2*Math.pow(2,e)),parseInt((r+180)/360*Math.pow(2,e)),parseInt((1-Math.asinh(Math.tan(l*(Math.PI/180)))/Math.PI)/2*Math.pow(2,e)),parseInt((o+180)/360*Math.pow(2,e))]},g=function(e,t,a,n){var c=parseInt(e.deg)+(60*e.min+parseInt(e.sec))/3600,s=parseInt(t.deg)+(60*t.min+parseInt(t.sec))/3600,r=parseInt(a.deg)+60*a.min/3600,l=parseInt(n.deg)+60*n.min/3600;return{decimalDegreLatitude:"S"===e.orientation?-c:c,decimalDegreLongitude:"O"===t.orientation?-s:s,decimalDegreLatitudeDistance:r,decimalDegreLongitudeDistance:l}},f=function(e,t,a,n){for(var c=t[0],s=t[1],r=t[2],l=t[3],o=c-r,i=l-s,u=Object(p.a)(Array(o+1)).map((function(){return Array(i+1)})),j=s;j<=l;++j)for(var d=r;d<=c;++d)u[d-r][j-s]=[a,j,d];return u};var x=function(e){var t=e.mapArray,a=(e.mapSettingsData,e.isStoredMap),c=e.storedMapName,s=Object(n.useRef)(null),r=Object(n.useRef)(null);return console.log(a),Object(b.jsxs)("div",{children:[Object(b.jsx)("canvas",{ref:r,className:"canvas-style-gaticule mt-5"}),Object(b.jsx)("table",{id:"map",ref:s,className:"mt-5",cellSpacing:"0",cellPadding:"0",style:{border:"none"},children:Object(b.jsx)("tbody",{children:t.map((function(e,t){return Object(b.jsx)("tr",{children:e.map((function(e,t){return Object(b.jsx)("td",{style:"background-image: url(../../../cartes/".concat(c,"/openstreetmap/").concat(e[0],"_").concat(e[1],".png)"),children:Object(b.jsx)("img",{alt:"",src:a?"../../../cartes/".concat(c,"/openseamap/").concat(e[0],"_").concat(e[1],".png"):"https://tiles.openseamap.org/seamark/".concat(e[0],"/").concat(e[1],"/").concat(e[2],".png")})},t)}))},t)}))})})]})},v=a(533),N=a(537),S=a(534),y=a(69),M=a(70),w=(a(286),function(e){return Object(b.jsx)(v.a,{id:"button-tooltip",children:e})}),D=function(e){var t=e.setShowSettings,a=e.setShowLoadMap,n=e.amerState,c=Object(r.a)(n,2),s=c[0],l=c[1];return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(N.a,{sticky:"top",className:"navbar-dark",style:{position:"fixed",width:"100%"},bg:"dark",children:Object(b.jsxs)("div",{className:"topbar-container",children:[Object(b.jsx)("a",{className:"navbar-brand",href:"#",children:"\xa0\xa0Assistance Navigation Maritime"}),Object(b.jsx)(S.a,{placement:"bottom",overlay:w("G\xe9rer les coordonn\xe9es"),children:Object(b.jsx)(u.a,{variant:"primary",onClick:function(){return t(!0)},children:Object(b.jsx)(y.a,{icon:M.b,size:"lg"})})}),Object(b.jsx)(S.a,{placement:"bottom",overlay:w("Charger une carte"),children:Object(b.jsx)(u.a,{variant:"primary",className:"spacedButton",onClick:function(){return a(!0)},children:Object(b.jsx)(y.a,{icon:M.e,size:"lg"})})}),Object(b.jsx)(S.a,{placement:"bottom",overlay:w("Placer un amer"),children:Object(b.jsxs)(u.a,{variant:"primary",className:"spacedButton",onClick:function(){return l(!s)},children:[Object(b.jsx)(y.a,{icon:M.a,size:"lg"}),s?" ON":" OFF"]})}),Object(b.jsx)(S.a,{placement:"bottom",overlay:w("Tracer une route"),children:Object(b.jsx)(u.a,{variant:"primary",className:"spacedButton",children:Object(b.jsx)(y.a,{icon:M.c,size:"lg"})})}),Object(b.jsx)(S.a,{placement:"bottom",overlay:w("Aide"),children:Object(b.jsx)(u.a,{variant:"primary",className:"spacedButton",children:Object(b.jsx)(y.a,{icon:M.d,size:"lg"})})})]})})})},C=a(68),F=a.n(C),k=a(104),I=function(e){var t=e.show,a=e.setMapArray,c=e.mapNameState,s=e.savedMapsState,l=e.setMapSettingsData,i=e.setIsStoredMap,j=Object(r.a)(s,2),m=j[0],x=j[1],v=Object(r.a)(t,2),N=v[0],S=v[1],y=Object(r.a)(c,2),M=y[0],w=y[1],D=Object(n.useState)("47"),C=Object(r.a)(D,2),F=C[0],k=C[1],I=Object(n.useState)("25"),L=Object(r.a)(I,2),E=L[0],A=L[1],P=Object(n.useState)("0"),T=Object(r.a)(P,2),z=T[0],B=T[1],R=Object(n.useState)("N"),H=Object(r.a)(R,2),V=H[0],q=H[1],_=Object(n.useState)("2"),X=Object(r.a)(_,2),Y=X[0],G=X[1],W=Object(n.useState)("50"),Z=Object(r.a)(W,2),J=Z[0],U=Z[1],K=Object(n.useState)("0"),Q=Object(r.a)(K,2),$=Q[0],ee=Q[1],te=Object(n.useState)("O"),ae=Object(r.a)(te,2),ne=ae[0],ce=ae[1],se=Object(n.useState)("0"),re=Object(r.a)(se,2),le=re[0],oe=re[1],ie=Object(n.useState)("15"),ue=Object(r.a)(ie,2),je=ue[0],de=ue[1],be=Object(n.useState)("0"),me=Object(r.a)(be,2),pe=me[0],he=me[1],Oe=Object(n.useState)("15"),ge=Object(r.a)(Oe,2),fe=ge[0],xe=ge[1],ve=Object(n.useState)("13"),Ne=Object(r.a)(ve,2),Se=Ne[0],ye=Ne[1],Me=function(){return S(!1)};return Object(b.jsxs)(o.a,{show:N,onHide:Me,size:"lg",children:[Object(b.jsx)(o.a.Header,{children:Object(b.jsx)(o.a.Title,{children:"Gestion des coordonn\xe9es"})}),Object(b.jsxs)(o.a.Body,{children:[Object(b.jsx)("div",{className:"row g-3 align-items-end",noValidate:!0,children:Object(b.jsxs)("div",{className:"col",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"mapName",children:"Nom de la carte :"}),Object(b.jsx)("input",{className:"form-control",type:"text",id:"mapName",value:M,onChange:function(e){return w(e.target.value)}})]})}),Object(b.jsx)("hr",{className:"my-4"}),Object(b.jsxs)("div",{className:"row g-3 align-items-end",noValidate:!0,children:[Object(b.jsxs)("div",{className:"col-sm",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"latDeg",children:"Degr\xe9"}),Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{className:"form-control",type:"number",id:"latDeg",value:F,onChange:function(e){return d(e.target.value,-90,90)&&k(e.target.value)}}),Object(b.jsx)("span",{className:"input-group-text",children:Object(b.jsx)("b",{children:"\xb0"})})]})]}),Object(b.jsxs)("div",{className:"col-sm",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"latMin",children:"Minutes"}),Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{className:"form-control",type:"number",id:"latMin",value:E,onChange:function(e){return d(e.target.value,0,60)&&A(e.target.value)}}),Object(b.jsx)("span",{className:"input-group-text",children:Object(b.jsx)("b",{children:"'"})})]})]}),Object(b.jsxs)("div",{className:"col-sm",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"latSec",children:"Secondes"}),Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{className:"form-control",type:"number",id:"latSec",value:z,onChange:function(e){return d(e.target.value,0,60)&&B(e.target.value)}}),Object(b.jsx)("span",{className:"input-group-text",children:Object(b.jsx)("b",{children:'"'})})]})]}),Object(b.jsxs)("div",{className:"col-sm-2",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"latitude",children:"Latitude"}),Object(b.jsxs)("div",{name:"latitude",className:"btn-group",role:"group","aria-label":"Basic radio toggle button group",children:[Object(b.jsx)("input",{className:"btn-check",type:"radio",id:"latRadioN",value:"N",autoComplete:"off",checked:"N"===V,onChange:function(e){return q(e.target.value)}}),Object(b.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"latRadioN",children:"Nord"}),Object(b.jsx)("input",{className:"btn-check",type:"radio",id:"latRadioS",value:"S",autoComplete:"off",checked:"S"===V,onChange:function(e){return q(e.target.value)}}),Object(b.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"latRadioS",children:"Sud"})]})]})]}),Object(b.jsx)("hr",{className:"my-4"}),Object(b.jsxs)("div",{className:"row g-3 align-items-end",noValidate:!0,children:[Object(b.jsxs)("div",{className:"col-sm",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"lonDeg",children:"Degr\xe9"}),Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{className:"form-control",type:"number",id:"lonDeg",value:Y,onChange:function(e){return d(e.target.value,-180,180)&&G(e.target.value)}}),Object(b.jsx)("span",{className:"input-group-text",children:Object(b.jsx)("b",{children:"\xb0"})})]})]}),Object(b.jsxs)("div",{className:"col-sm",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"lonMin",children:"Minutes"}),Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{className:"form-control",type:"number",id:"lonMin",value:J,onChange:function(e){return d(e.target.value,0,60)&&U(e.target.value)}}),Object(b.jsx)("span",{className:"input-group-text",children:Object(b.jsx)("b",{children:"'"})})]})]}),Object(b.jsxs)("div",{className:"col-sm",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"lonSec",children:"Secondes"}),Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{className:"form-control",type:"number",id:"lonSec",value:$,onChange:function(e){return d(e.target.value,0,60)&&ee(e.target.value)}}),Object(b.jsx)("span",{className:"input-group-text",children:Object(b.jsx)("b",{children:'"'})})]})]}),Object(b.jsxs)("div",{className:"col-sm-2",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"latitude",children:"Longitude"}),Object(b.jsxs)("div",{className:"btn-group",name:"latitude",role:"group","aria-label":"Basic radio toggle button group",children:[Object(b.jsx)("input",{className:"btn-check",type:"radio",id:"lonRadioE",value:"E",autoComplete:"off",checked:"E"===ne,onChange:function(e){return ce(e.target.value)}}),Object(b.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"lonRadioE",children:"Est"}),Object(b.jsx)("input",{className:"btn-check",type:"radio",id:"lonRadioO",value:"O",autoComplete:"off",checked:"O"===ne,onChange:function(e){return ce(e.target.value)}}),Object(b.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"lonRadioO",children:"Ouest"})]})]})]}),Object(b.jsx)("hr",{className:"my-4"}),Object(b.jsxs)("div",{className:"row g-3 align-items-end",noValidate:!0,children:[Object(b.jsxs)("div",{className:"col-sm",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"latDistDeg",children:"Degr\xe9 latitude"}),Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{className:"form-control",type:"number",id:"latDistDeg",value:pe,onChange:function(e){return d(e.target.value,-180,180)&&he(e.target.value)}}),Object(b.jsx)("span",{className:"input-group-text",children:Object(b.jsx)("b",{children:"\xb0"})})]})]}),Object(b.jsxs)("div",{className:"col-sm",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"latDistMin",children:"Minutes latitude"}),Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{className:"form-control",type:"number",id:"latDistMin",value:fe,onChange:function(e){return d(e.target.value,0,60)&&xe(e.target.value)}}),Object(b.jsx)("span",{className:"input-group-text",children:Object(b.jsx)("b",{children:"'"})})]})]})]}),Object(b.jsx)("hr",{className:"my-4"}),Object(b.jsxs)("div",{className:"row g-3 align-items-end",noValidate:!0,children:[Object(b.jsxs)("div",{className:"col-sm",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"lonDistDeg",children:"Degr\xe9 longitude"}),Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{className:"form-control",type:"number",id:"lonDistDeg",value:le,onChange:function(e){return d(e.target.value,-180,180)&&oe(e.target.value)}}),Object(b.jsx)("span",{className:"input-group-text",children:Object(b.jsx)("b",{children:"\xb0"})})]})]}),Object(b.jsxs)("div",{className:"col-sm",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"lonDistMin",children:"Minutes longitude"}),Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{className:"form-control",type:"number",id:"lonDistMin",value:je,onChange:function(e){return d(e.target.value,0,60)&&de(e.target.value)}}),Object(b.jsx)("span",{className:"input-group-text",children:Object(b.jsx)("b",{children:"'"})})]})]})]}),Object(b.jsx)("hr",{className:"my-4"}),Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col",children:[Object(b.jsx)("label",{className:"form-label",htmlFor:"mapZoom",children:"Zoom :"}),Object(b.jsxs)("select",{className:"form-control",id:"mapZoom",value:Se,onChange:function(e){return ye(e.target.value)},children:[Object(b.jsx)("option",{value:"10",children:"1:500 000"}),Object(b.jsx)("option",{value:"11",children:"1:250 000"}),Object(b.jsx)("option",{value:"12",children:"1:150 000"}),Object(b.jsx)("option",{value:"13",children:"1:70 000"}),Object(b.jsx)("option",{value:"14",children:"1:35 000"}),Object(b.jsx)("option",{value:"15",children:"1:15 000"}),Object(b.jsx)("option",{value:"16",children:"1:8 000"}),Object(b.jsx)("option",{value:"17",children:"1:4 000"}),Object(b.jsx)("option",{value:"18",children:"1:2 000"})]})]})})]}),Object(b.jsxs)(o.a.Footer,{children:[Object(b.jsx)(u.a,{variant:"danger",onClick:Me,children:"Annuler"}),Object(b.jsx)(u.a,{variant:"success",onClick:function(){var e=function(e){var t=e.latitude,a=e.longitude,n=e.latitudeDistance,c=e.longitudeDistance,s=e.zoom,r=e.size,l=g(t,a,n,c),o=l.decimalDegreLatitude,i=l.decimalDegreLongitude,u=l.decimalDegreLatitudeDistance,j=l.decimalDegreLongitudeDistance,d=h(s,o,i,u,j),b=O(s,o,i,u,j);return f(d,b,s,r)}({latitude:{deg:F,min:E,sec:z,orientation:V},longitude:{deg:Y,min:J,sec:$,orientation:ne},longitudeDistance:{deg:le,min:je},latitudeDistance:{deg:pe,min:fe},zoom:parseInt(Se)});console.log("changement de isStored \xe0 false"),i(!1),l({latitude:{deg:F,min:E,sec:z,orientation:V},longitude:{deg:Y,min:J,sec:$,orientation:ne},longitudeDistance:{deg:le,min:je},latitudeDistance:{deg:pe,min:fe},zoom:parseInt(Se),name:M}),a(e),m.find((function(e){return e===M}))||x([].concat(Object(p.a)(m),[M])),S(!1)},children:"Valider"})]})]})},L=window.require("fs");console.log({fs:L});var E=a(289);console.log({request:E});var A=a(245);console.log({shelljs:A});var P=function(e){var t=e.show,a=e.mapArrayState,c=e.mapNameState,s=e.savedMapsState,l=e.isStoredMapState,j=e.storedMapState,d=Object(r.a)(l,2),m=d[0],p=d[1],h=Object(r.a)(c,2),O=h[0],g=(h[1],Object(r.a)(a,2)),f=g[0],x=g[1],v=Object(r.a)(t,2),N=v[0],S=v[1],y=Object(r.a)(s,2),M=y[0],w=(y[1],Object(r.a)(j,2)),D=(w[0],w[1]),C=function(){return S(!1)},I=function(e,t,a){E.head(e,(function(){E(e).pipe(L.createWriteStream(t)).on("close",a)}))},A=function(){return console.log("terminado")};Object(n.useEffect)((function(){m||f.map((function(e,t){e.map((function(e,a){I("https://a.tile.openstreetmap.fr/osmfr/".concat(e[0],"/").concat(e[1],"/").concat(e[2],".png"),"cartes/"+O+"/openstreetmap/"+t+"_"+a+".png",A),I("https://tiles.openseamap.org/seamark/".concat(e[0],"/").concat(e[1],"/").concat(e[2],".png"),"cartes/"+O+"/openseamap/"+t+"_"+a+".png",A)}))}))}),[f]),Object(n.useEffect)((function(){(function(){var e=Object(k.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.length){e.next=11;break}return t="cartes/"+O+"/informations.txt",a="zoom="+f[0][0][0]+":latSize="+f.length+":lonSize="+f[0].length,e.next=5,L.mkdir("cartes/"+O,(function(e){if(e)throw e;console.log("The dir street was succesfully created!")}));case 5:return e.next=7,L.mkdir("cartes/"+O+"/openstreetmap",(function(e){if(e)throw e;console.log("The dir street was succesfully created!")}));case 7:return e.next=9,L.mkdir("cartes/"+O+"/openseamap",(function(e){if(e)throw e;console.log("The dir sea was succesfully created!")}));case 9:return e.next=11,L.writeFile(t,a,(function(e){if(e)throw e;console.log("The file was succesfully saved!")}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[M]);var P=Object(n.useState)(""),T=Object(r.a)(P,2),z=T[0],B=T[1];Object(n.useEffect)((function(){B(M[0])}),[M]),console.log(z);return Object(b.jsxs)(o.a,{show:N,onHide:C,size:"lg",children:[Object(b.jsx)(o.a.Header,{children:Object(b.jsx)(o.a.Title,{children:"Charger une carte"})}),Object(b.jsx)(o.a.Body,{children:Object(b.jsx)(i.a,{children:Object(b.jsxs)(i.a.Group,{children:[Object(b.jsx)(i.a.Label,{children:"Nom"}),Object(b.jsx)(i.a.Control,{disabled:!M.length,as:"select",value:z,onChange:function(e){return B(e.target.value)},children:M.length?M.map((function(e){return Object(b.jsx)("option",{children:e})})):Object(b.jsx)("option",{children:"Pas de carte sauvegard\xe9e"})})]})})}),Object(b.jsxs)(o.a.Footer,{children:[Object(b.jsx)(u.a,{variant:"danger",onClick:C,children:"Annuler"}),Object(b.jsx)(u.a,{variant:"success",disabled:!M.length,onClick:function(){console.log(z),D(z);var e="cartes/"+z+"/informations.txt";L.readFile(e,"utf8",(function(e,t){if(e)return console.log(e);t.split(":")[0].split("=")[1];for(var a=t.split(":")[1].split("=")[1],n=t.split(":")[2].split("=")[1],c=[],s=0;s<=a-1;++s){c[s]=[];for(var r=0;r<=n-1;++r)c[s][r]=[s,r]}x(c),p(!0)})),C()},children:"Valider Carte"})]})]})},T=window.require("fs"),z=function(e){var t=e.settingsModal,a=e.loadMapModal,c=e.mapArrayState,s=e.isStoredMapState,l=e.setMapSettingsData,o=e.mapNameState,i=e.storedMapState,u=Object(r.a)(o,2),j=u[0],d=u[1],m=Object(n.useState)([]),p=Object(r.a)(m,2),h=p[0],O=p[1],g=Object(r.a)(c,2),f=g[0],x=g[1],v=Object(n.useState)(!1),N=Object(r.a)(v,2),S=N[0],y=N[1];Object(n.useEffect)((function(){S||(function(){var e=Object(k.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,T.readdir("cartes/",(function(e,a){console.log({fileList:a}),a.forEach((function(e){t.push(e)}))}));case 3:console.log({localMapArray:t}),O(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),y(!0))}),[S]);var M=Object(r.a)(s,2),w=(M[0],M[1]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(P,{show:a,mapArrayState:[f,x],isStoredMapState:s,mapNameState:[j,d],savedMapsState:[h,O],storedMapState:i}),Object(b.jsx)(I,{setMapSettingsData:l,show:t,setMapArray:x,mapNameState:[j,d],savedMapsState:[h,O],setIsStoredMap:w})]})},B=(a(526),function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),l=Object(r.a)(s,2),o=l[0],i=l[1],u=Object(n.useState)([]),j=Object(r.a)(u,2),d=j[0],p=j[1],h=Object(n.useState)(!0),O=Object(r.a)(h,2),g=O[0],f=O[1],v=Object(n.useState)({}),N=Object(r.a)(v,2),S=N[0],y=N[1],M=Object(n.useState)(""),w=Object(r.a)(M,2),C=w[0],F=w[1],k=Object(n.useState)(""),I=Object(r.a)(k,2),L=I[0],E=I[1];console.log({isStoredMap:g}),console.log({mapName:C}),console.log({storedMapName:L});var A=Object(n.useState)(!1),P=Object(r.a)(A,2),T=P[0],B=P[1];return Object(n.useEffect)((function(){var e=0,t=0,a=document.documentElement,n=document.getElementById("dragMap"),c=function(c){if(n.offsetLeft>0)n.style.left="0px";else if(n.offsetTop>0)n.style.top="0px";else if(a.scrollHeight!=a.clientHeight)if(a.scrollWidth!=a.clientWidth){var s=c.clientX-e,r=c.clientY-t;n.style.top="".concat(n.offsetTop+.3*r,"px"),n.style.left="".concat(n.offsetLeft+.3*s,"px"),e=c.clientX,t=c.clientY}else n.style.left="".concat(n.offsetLeft+1,"px");else n.style.top="".concat(n.offsetTop+1,"px")},s=function e(){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",e),n.style.cursor="grab",n.style.removeProperty("user-select")};n.addEventListener("mousedown",(function(a){e=a.clientX,t=a.clientY,document.addEventListener("mousemove",c),document.addEventListener("mouseup",s),n.style.cursor="grabbing",n.style.userSelect="none"}))})),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(D,{setShowSettings:c,setShowLoadMap:i,amerState:[T,B]}),Object(b.jsx)(z,{settingsModal:[a,c],loadMapModal:[o,i],isStoredMapState:[g,f],mapArrayState:[d,p],setMapSettingsData:y,mapNameState:[C,F],storedMapState:[L,E]}),Object(b.jsxs)("div",{id:"dragMap",className:"draggable",children:[Object(b.jsx)(x,{mapArray:d,isStoredMap:g,mapSettingsData:S,storedMapName:L}),Object(b.jsx)(m,{amer:T,mapArray:d})]})]})}),R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,539)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))},H=(a(527),a(11)),V=a.n(H);console.log({fs:V.a});var q=function(){s.a.render(Object(b.jsx)(B,{}),document.getElementById("root"))};window.cordova?document.addEventListener("deviceready",(function(){q()}),!1):q(),R()}},[[528,1,2]]]);
//# sourceMappingURL=main.e731e9e5.chunk.js.map